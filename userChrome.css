@media (-moz-platform: linux) {

  /* === palette === */
  :root {
    /* bg = #282c3c -> rgb(40,44,60); alpha .80 = ~20% transparent */
    --uc-r: 40; --uc-g: 44; --uc-b: 60;
    --uc-a: .80;
    --uc-surface: rgba(var(--uc-r), var(--uc-g), var(--uc-b), var(--uc-a));
    --uc-fg: #ffffff;
  }

  /* Keep the window surface from blocking translucency */
  /* confirmed to be needed for sidebar to be transparent*/
  #browser { background: transparent !important; }

  /* ===================== TOP BAR ====================== */
  /* Paint ONLY the toolbox so opacity matches everywhere */
  #navigator-toolbox {
    -moz-appearance: none !important;
    background: var(--uc-surface) !important;
    background-image: none !important;
    color: var(--uc-fg) !important;
  }
  /* Inner bars transparent to avoid double-stacking */
  #nav-bar, #TabsToolbar, #PersonalToolbar, #toolbar-menubar, #titlebar {
    background: transparent !important;
    background-image: none !important;
    color: inherit !important;
  }
  .toolbarbutton-1 { fill: currentColor !important; }

  /* ===================== SIDEBAR (native vertical tabs) ====================== */
  /* Comprehensive sidebar container targeting */
  #sidebar-box, #sidebar, #sidebar-header, #sidebar-main {
    background: var(--uc-surface) !important;
    color: var(--uc-fg) !important;
  }

  /* confirmed to make the sidebars transparent, maybe remove the background
   * begind sidebars */
  #sidebar-box browser {
    background-color: transparent !important;
  }

  /* Make selected/hovered tab POP (white overlays only) */
  #tabbrowser-tabs[orient="vertical"] .tabbrowser-tab[selected] .tab-background {
    background: rgba(255,255,255,.22) !important;
    border-left: 2px solid rgba(255,255,255,.65) !important;
    border-radius: 6px !important;
  }
  #tabbrowser-tabs[orient="vertical"] .tabbrowser-tab:hover .tab-background {
    background: rgba(255,255,255,.12) !important;
    border-left: 2px solid rgba(255,255,255,.35) !important;
  }

  /* ===================== URL BAR ====================== */
  /* Pill matches the same surface tint */
  #urlbar-background {
    /* remember to avoid double tint, this should be transparent as it is over
     * the already semitransparent horizontal bar
     * and by that I mean the titlebar(?) the thing
     * that contains the <- ->, reload, urlbar etc
    /* background: var(--uc-surface) !important; */
    background-color: transparent !important;
    border-color: rgba(255,255,255,.25) !important;
  }

  /* confirmed to have effect */
  .urlbarView { background: var(--uc-surface) !important; }

  /* Strong, clear highlight for selection/hover in the dropdown */
  .urlbarView-row[aria-selected="true"] > .urlbarView-row-inner,
  .urlbarView-row[selected] > .urlbarView-row-inner {
    background: rgba(255,255,255,.24) !important;
  }
  .urlbarView-row:hover > .urlbarView-row-inner {
    background: rgba(255,255,255,.16) !important;
  }

  /* Ensure text stays readable on lighter chips */
  .urlbarView-row .urlbarView-title,
  .urlbarView-row[aria-selected="true"] .urlbarView-title,
  .urlbarView-row[selected] .urlbarView-title {
    color: var(--uc-fg) !important;
  }

  /* ===================== HAMBURGER MENU ====================== */
  /* Comprehensive hamburger menu transparency targeting */
  
  /* Primary popup containers */
  #appMenu-popup, #PanelUI-popup {
    background-color: transparent !important;
    background-image: none !important;
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    --panel-shadow: none !important;
    --arrowpanel-background: var(--uc-surface) !important;
    --panel-background: transparent !important;
    -moz-appearance: none !important;
  }

  /* Main panel views and containers */
  #appMenu-protonMainView, #PanelUI-mainView,
  #appMenu-libraryView, #PanelUI-libraryView {
    background-color: var(--uc-surface) !important;
    background-image: none !important;
    background: var(--uc-surface) !important;
    --arrowpanel-background: var(--uc-surface) !important;
    --panel-background: var(--uc-surface) !important;
    color: var(--uc-fg) !important;
  }

  /* Subview body styling */
  #appMenu-popup .panel-subview-body,
  #PanelUI-popup .panel-subview-body {
    background-color: var(--uc-surface) !important;
    background-image: none !important;
    background: var(--uc-surface) !important;
  }

  /* General panelview styling with comprehensive targeting */
  panelview, .PanelUI-subView {
    background-color: var(--uc-surface) !important;
    background-image: none !important;
    background: var(--uc-surface) !important;
    --arrowpanel-background: var(--uc-surface) !important;
    --panel-background: var(--uc-surface) !important;
    --panel-shadow: none !important;
    color: var(--uc-fg) !important;
  }

  /* Panel arrows and content containers */
  .panel-arrowcontent, .panel-arrowbox {
    background: var(--uc-surface) !important;
    background-color: var(--uc-surface) !important;
    background-image: none !important;
    border: none !important;
    box-shadow: none !important;
    --panel-shadow: none !important;
  }

  /* Remove shadows from all panel elements */
  #appMenu-popup *, #PanelUI-popup * {
    box-shadow: none !important;
  }

  /* Menu items and buttons */
  .subviewbutton, .panel-list-item {
    background-color: transparent !important;
    background-image: none !important;
  }

  /* Menu items hover states */
  .subviewbutton:hover, .panel-list-item:hover {
    background-color: rgba(255,255,255,.16) !important;
    background-image: none !important;
  }

  /* Hamburger button itself */
  #PanelUI-button, #PanelUI-menu-button {
    background-image: none !important;
    box-shadow: none !important;
  }
}

